webpackJsonp([9],{"75Op":function(i,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e={name:"missionDetailHeader",data:function(){return{name:sessionStorage.getItem("missionName")}}},a={render:function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"header"},[t("div",{staticClass:"header-left back-icon"},[t("router-link",{attrs:{to:"/mission"}},[t("svg",{staticClass:"icon arrow",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#iconleft"}})])])],1),this._v(" "),t("div",{staticClass:"header-title v-center"},[this._v("\n    "+this._s(this.name)+"\n  ")]),this._v(" "),t("div",{staticClass:"header-right"})])},staticRenderFns:[]};var n=s("VU/8")(e,a,!1,function(i){s("Qjox")},"data-v-5374d0b9",null).exports,l=s("lbHh"),c=s.n(l),r=s("OMN4"),o=s.n(r),d={name:"missionDetailDetail",data:function(){return{fileList:[],gainID:"",level:parseInt(c.a.get("level")),imageUrl:"",gain:{MissionID:parseInt(sessionStorage.getItem("missionID")),Name:"",Remark:""},addGain:!1,mission:[],gainList:[]}},methods:{uploadSuccess:function(){alert("上传成功！"),this.getGainList()},uploadError:function(){alert("上传失败！请稍后再试或联系助理")},goGain:function(i){sessionStorage.setItem("gainName",i.name),sessionStorage.setItem("gainID",i.id),this.$router.push("/gain")},handleAvatarSuccess:function(i,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(i){var t=i.size/1024/1024/1024<3;return t||this.$message.error("上传图片大小不能超过 3MB!"),t},handleRemove:function(i,t){console.log(i,t)},handlePreview:function(i){console.log(i)},handleAddGain:function(){this.gain.Name="",this.gain.Remark="",this.addGain=!0},submitGain:function(){this.$refs.upload.submit(),this.addGain=!1,o.a.get(this.url+"/gain/mission/"+sessionStorage.getItem("missionID")).then(this.getGainListSucc)},getGainList:function(){o.a.get(this.url+"/gain/mission/"+sessionStorage.getItem("missionID")).then(this.getGainListSucc)},getGainListSucc:function(i){200===i.status&&(i=i.data,this.gainList=i)},getMission:function(){o.a.get(this.url+"/mission/id/"+sessionStorage.getItem("missionID")).then(this.getMissionSucc)},getMissionSucc:function(i){200===i.status&&(i=i.data,this.mission=i)}},mounted:function(){this.getMission(),this.getGainList()}},u={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"page-bg"},[s("el-divider"),i._v(" "),s("div",{staticClass:"weui-cell"},[i._m(0),i._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui_cell_bd weui_cell_primary"},[i._v("\n        "+i._s(i.mission.moduleName)+"\n      ")])])]),i._v(" "),s("div",{staticClass:"weui-cell"},[i._m(1),i._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui_cell_bd weui_cell_primary"},[i._v("\n        "+i._s(i.mission.name)+"\n      ")])])]),i._v(" "),s("div",{staticClass:"weui-cell"},[i._m(2),i._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui_cell_bd weui_cell_primary"},[i._v("\n        "+i._s(i.mission.startTime)+"\n      ")])])]),i._v(" "),s("div",{staticClass:"weui-cell"},[i._m(3),i._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui_cell_bd weui_cell_primary"},[i._v("\n        "+i._s(i.mission.endTime)+"\n      ")])])]),i._v(" "),s("div",{staticClass:"weui-cell"},[i._m(4),i._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"weui_cell_bd weui_cell_primary"},[i._v("\n        "+i._s(i.mission.ownerName)+"\n      ")])])]),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"row"},[s("span",{staticClass:"v-center"},[s("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconrenwu"}})]),i._v("\n        任务内容\n      ")])]),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"weui-cell"},[i._v(i._s(i.mission.content))]),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"row"},[s("span",{staticClass:"v-center"},[s("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconrenwu1"}})]),i._v("\n        考核指标\n      ")])]),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"weui-cell"},[i._v(i._s(i.mission.target))]),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"row"},[i.level===i.student?s("svg",{staticClass:"icon addTaskIcon",attrs:{"aria-hidden":"true"},on:{click:i.handleAddGain}},[s("use",{attrs:{"xlink:href":"#iconicon_add"}})]):i._e(),i._v(" "),s("span",{staticClass:"v-center"},[s("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconwancheng"}})]),i._v("\n      成果\n    ")])]),i._v(" "),s("el-divider"),i._v(" "),i._l(i.gainList,function(t){return t.state===i.GainYes?s("div",{key:t.id},[s("div",{staticClass:"row",on:{click:function(s){return i.goGain(t)}}},[s("span",{staticClass:"taskName"},[s("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icondian3"}})]),i._v("\n          "+i._s(t.name)+"\n        ")]),i._v(" "),s("span",{staticClass:"delIcon"},[s("svg",{staticClass:"icon tongguoIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icontongguo1"}})])])]),i._v(" "),s("el-divider")],1):i._e()}),i._v(" "),i._l(i.gainList,function(t){return t.state===i.GainWaitForCheck?s("div",{key:t.id},[s("div",{staticClass:"row",on:{click:function(s){return i.goGain(t)}}},[s("span",{staticClass:"taskName gainWaitForCheck"},[s("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icondian3"}})]),i._v("\n          "+i._s(t.name)+"\n        ")]),i._v(" "),s("span",{staticClass:"delIcon gainWaitForCheck"},[i._v("\n          待审核\n        ")])]),i._v(" "),s("el-divider")],1):i._e()}),i._v(" "),i._l(i.gainList,function(t){return t.state===i.GainNo?s("div",{key:t.id},[s("div",{staticClass:"row",on:{click:function(s){return i.goGain(t)}}},[s("span",{staticClass:"taskName gainNo"},[s("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icondian3"}})]),i._v("\n          "+i._s(t.name)+"\n        ")]),i._v(" "),s("span",{staticClass:"delIcon gainNo"},[i._v("\n          被驳回\n        ")])]),i._v(" "),s("el-divider")],1):i._e()}),i._v(" "),s("el-dialog",{attrs:{title:"新建任务",visible:i.addGain,width:"90%"},on:{"update:visible":function(t){i.addGain=t}}},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[i._v("成果名称")])]),i._v(" "),s("div",{staticClass:"weui-cell__bd "},[s("input",{directives:[{name:"model",rawName:"v-model",value:i.gain.Name,expression:"gain.Name"}],staticClass:"weui-input",attrs:{pattern:"[0-9]*",placeholder:"请输入成果名称",type:"name"},domProps:{value:i.gain.Name},on:{input:function(t){t.target.composing||i.$set(i.gain,"Name",t.target.value)}}})])]),i._v(" "),s("div",{staticClass:"weui-cell weui-cells_form"},[s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[i._v("备注")])]),i._v(" "),s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"对该成果进行简要阐述",clearable:""},model:{value:i.gain.Remark,callback:function(t){i.$set(i.gain,"Remark",t)},expression:"gain.Remark"}})],1),i._v(" "),s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[i._v("上传附件")])]),i._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://bci.renjiwulian.com/gain/",data:i.gain,"on-preview":i.handlePreview,"on-remove":i.handleRemove,"on-success":i.uploadSuccess,"on-error":i.uploadError,"file-list":i.fileList,"auto-upload":!1,multiple:!1,limit:"1"}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[i._v("选取文件")])],1)],1),i._v(" "),s("el-divider"),i._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){i.addGain=!1}}},[i._v("取 消")]),i._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return i.submitGain()}}},[i._v("提交")])],1)],1)],2)},staticRenderFns:[function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("所属课题")])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("任务名称")])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("开始时间")])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("结束时间")])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("任务负责人")])])}]};var v=s("VU/8")(d,u,!1,function(i){s("EQue")},"data-v-60806275",null).exports,_={name:"missionDetail",components:{MissionDetailHeader:n,MissionDetailDetail:v}},m={render:function(){var i=this.$createElement,t=this._self._c||i;return t("div",[t("mission-detail-header"),this._v(" "),t("mission-detail-detail")],1)},staticRenderFns:[]};var h=s("VU/8")(_,m,!1,function(i){s("XqUO")},"data-v-81f45668",null);t.default=h.exports},EQue:function(i,t){},Qjox:function(i,t){},XqUO:function(i,t){}});
//# sourceMappingURL=9.9bc7646653736f0b93a1.js.map