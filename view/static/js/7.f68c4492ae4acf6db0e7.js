webpackJsonp([7],{"1D31":function(t,s){},bBn0:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={name:"taskHeader",data:function(){return{taskName:sessionStorage.getItem("taskName")}}},a={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"header-left back-icon"},[s("router-link",{attrs:{to:"/taskList"}},[s("svg",{staticClass:"icon arrow",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconleft"}})])])],1),this._v(" "),s("div",{staticClass:"header-title v-center"},[this._v("\n    "+this._s(this.taskName)+"\n  ")]),this._v(" "),s("div",{staticClass:"header-right"})])},staticRenderFns:[]};var n=e("VU/8")(i,a,!1,function(t){e("1D31")},"data-v-7c235054",null).exports,l=e("OMN4"),c=e.n(l),r={name:"taskDetail",data:function(){return{level:parseInt(localStorage.getItem("level")),mission:{name:"",moduleID:parseInt(sessionStorage.getItem("taskID")),startTime:"",endTime:"",ownerID:"",content:"",target:""},task:"",missionList:[{name:"",moduleID:parseInt(sessionStorage.getItem("taskID")),startTime:"",endTime:"",ownerID:"",content:"",target:""}],studentList:[],addMission:!1}},methods:{goProjectDetail:function(t,s){sessionStorage.setItem("pid",t),sessionStorage.setItem("pname",s),this.$router.push("/projectDetail")},handleAddMission:function(){this.mission.name="",this.mission.startTime="",this.mission.endTime="",this.mission.content="",this.mission.target="",this.mission.ownerID=-1,this.addMission=!0},getTask:function(){c.a.get(this.url+"/module/id/"+sessionStorage.getItem("taskID")).then(this.getTaskSucc)},getTaskSucc:function(t){200===t.status&&(t=t.data,this.task=t)},getMissionList:function(){c.a.get(this.url+"/mission/module/"+sessionStorage.getItem("taskID")).then(this.getMissionListSucc)},getMissionListSucc:function(t){200===t.status?(t=t.data,this.missionList=t):alert(t.data)},getStudentList:function(){c.a.get(this.url+"/user/level/"+this.student).then(this.getStudentListSucc)},getStudentListSucc:function(t){200===t.status?(t=t.data,this.studentList=t):alert(t.data)},submit:function(){var t=this;this.mission.name.length>10?this.$notify.warning({title:"任务名称不能超过十个字！"}):(this.$axios({method:"post",url:this.url+"/mission/",data:this.mission}).then(function(s){200===s.status?(s=s.data,alert("提交成功！"),t.missionList.push({name:t.mission.name,ownerName:s.ownerName})):alert(s.data)}).catch(function(t){alert(t)}),this.addMission=!1)},goMissionDetail:function(t,s){sessionStorage.setItem("missionName",t),sessionStorage.setItem("missionID",s),this.$router.push("/missionDetail")}},mounted:function(){this.mission.ownerID=-1,this.getTask(),this.getMissionList(),this.getStudentList()}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-bg"},[e("el-divider"),t._v(" "),e("div",{staticClass:"weui-cell"},[t._m(0),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.task.projectName)+"\n      ")])])]),t._v(" "),e("div",{staticClass:"weui-cell"},[t._m(1),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.task.startTime)+"\n      ")])])]),t._v(" "),e("div",{staticClass:"weui-cell"},[t._m(2),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.task.endTime)+"\n      ")])])]),t._v(" "),e("div",{staticClass:"weui-cell"},[t._m(3),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.task.leaderName)+"\n      ")])])]),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"row"},[e("span",{staticClass:"v-center"},[e("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconrenwu"}})]),t._v("\n        课题内容\n      ")])]),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"weui-cell"},[t._v(t._s(t.task.content))]),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"row"},[e("span",{staticClass:"v-center"},[e("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconrenwu1"}})]),t._v("\n        考核指标\n      ")])]),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"weui-cell"},[t._v(t._s(t.task.target))]),t._v(" "),e("el-divider"),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"row"},[t.level===t.PR?e("svg",{staticClass:"icon addTaskIcon",attrs:{"aria-hidden":"true"},on:{click:t.handleAddMission}},[e("use",{attrs:{"xlink:href":"#iconicon_add"}})]):t._e(),t._v(" "),e("span",{staticClass:"v-center"},[e("svg",{staticClass:"icon manageIcon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconZ"}})]),t._v("\n      任务安排\n    ")])]),t._v(" "),e("el-divider"),t._v(" "),t._l(t.missionList,function(s){return e("div",{key:s.id},[e("div",{staticClass:"row",on:{click:function(e){return t.goMissionDetail(s.name,s.id)}}},[e("span",{staticClass:"taskName"},[e("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icondian3"}})]),t._v("\n          "+t._s(s.name)+"\n        ")]),t._v(" "),e("span",{staticClass:"delIcon"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconicon_signal"}})]),t._v("\n          "+t._s(s.ownerName)+"\n        ")])]),t._v(" "),e("el-divider")],1)}),t._v(" "),e("el-dialog",{attrs:{title:"新建任务",visible:t.addMission,width:"90%"},on:{"update:visible":function(s){t.addMission=s}}},[e("div",{staticClass:"weui-cell"},[e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[t._v("任务名称")])]),t._v(" "),e("div",{staticClass:"weui-cell__bd "},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mission.name,expression:"mission.name"}],staticClass:"weui-input",attrs:{pattern:"[0-9]*",placeholder:"请输入任务名称",type:"name"},domProps:{value:t.mission.name},on:{input:function(s){s.target.composing||t.$set(t.mission,"name",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"weui-cell"},[e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[t._v("开始时间")])]),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mission.startTime,expression:"mission.startTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.mission.startTime},on:{input:function(s){s.target.composing||t.$set(t.mission,"startTime",s.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"weui-cell"},[e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[t._v("结束时间")])]),t._v(" "),e("div",{staticClass:"weui-cell__bd"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mission.endTime,expression:"mission.endTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.mission.endTime},on:{input:function(s){s.target.composing||t.$set(t.mission,"endTime",s.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"weui_cell weui_cell_select"},[e("div",{staticClass:"weui_cell_bd weui_cell_primary"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.mission.ownerID,expression:"mission.ownerID"}],staticClass:"weui_select",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.mission,"ownerID",s.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"-1"}},[t._v("请选择任务负责人")]),t._v(" "),t._l(t.studentList,function(t){return e("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})],2)])]),t._v(" "),e("div",{staticClass:"weui-cell weui-cells_form"},[e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[t._v("任务主要内容")])]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入任务主要内容",clearable:""},model:{value:t.mission.content,callback:function(s){t.$set(t.mission,"content",s)},expression:"mission.content"}})],1),t._v(" "),e("div",{staticClass:"weui-cell weui-cells_form"},[e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[t._v("任务考核指标")])]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入任务考核指标",clearable:""},model:{value:t.mission.target,callback:function(s){t.$set(t.mission,"target",s)},expression:"mission.target"}})],1),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.addMission=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.submit()}}},[t._v("提交")])],1)],1)],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("所属项目")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("开始时间")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("结束时间")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"weui-cell__hd"},[s("label",{staticClass:"weui-label"},[this._v("课题负责人")])])}]};var d=e("VU/8")(r,o,!1,function(t){e("xQFH")},"data-v-eec4989a",null).exports,u={name:"task",components:{taskHeader:n,taskDetail:d}},v={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("task-header"),this._v(" "),s("task-detail")],1)},staticRenderFns:[]};var _=e("VU/8")(u,v,!1,function(t){e("rIJU")},"data-v-7b8f65ca",null);s.default=_.exports},rIJU:function(t,s){},xQFH:function(t,s){}});
//# sourceMappingURL=7.f68c4492ae4acf6db0e7.js.map