webpackJsonp([23],{DrfK:function(t,e){},XCsE:function(t,e){},XwuN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-left back-icon"},[e("router-link",{attrs:{to:"/project"}},[e("svg",{staticClass:"icon arrow",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconleft"}})])])],1),this._v(" "),e("div",{staticClass:"header-title v-center"},[this._v("\n    新建项目\n  ")]),this._v(" "),e("div",{staticClass:"header-right"})])},staticRenderFns:[]};var s=a("VU/8")({name:"newProjectHeader"},i,!1,function(t){a("kGw+")},"data-v-49f3571d",null).exports,l=a("mvHQ"),n=a.n(l),r=a("OMN4"),c=a.n(r),u={name:"assistantForm",data:function(){return{addTask:!1,task:{name:"",startTime:"",endTime:"",leaderID:"",content:"",target:""},taskAll:[{name:"",startTime:"",endTime:"",leaderID:"",content:"",target:""}],item:{name:"",startTime:"",endTime:"",content:"",managerID:"",target:""},list:[]}},methods:{handleAddTask:function(){this.task.name="",this.task.leaderID=-1,this.task.content="",this.task.target="",this.task.startTime="",this.task.endTime="",this.addTask=!0},saveTask:function(){""!==this.task.name?-1!==parseInt(this.task.leaderID)?(this.taskAll.push({name:this.task.name,startTime:this.task.startTime,endTime:this.task.endTime,leaderID:parseInt(this.task.leaderID),content:this.task.content,target:this.task.target}),this.addTask=!1):this.$notify.warning({title:"请选择课题负责人！"}):this.$notify.warning({title:"请输入课题名称！"})},getPIList:function(){c.a.get(this.url+"/user/level/"+this.PI).then(this.getPIListSucc)},getPIListSucc:function(t){(t=t.data)&&(this.LeaderList=t,this.list=this.list.concat(this.LeaderList))},getPRList:function(){c.a.get(this.url+"/user/level/"+this.PR).then(this.getPRListSucc)},getPRListSucc:function(t){(t=t.data)&&(this.FullList=t,this.list=this.list.concat(this.FullList),console.log(this.list))},getStudentList:function(){c.a.get(this.url+"/user/level/"+this.student).then(this.getStudentListSucc)},getStudentListSucc:function(t){(t=t.data)&&(this.StudentList=t)},submit:function(){var t=this;-1!==this.item.managerID?""!==this.item.name?this.$axios({method:"post",url:this.url+"/project/",data:n()(this.item)}).then(function(e){if(200===e.status){var a=e.data;t.taskAll.forEach(function(t){""!==t.name&&c.a.post("http://bci.renjiwulian.com/module/",{name:t.name,startTime:t.startTime,endTime:t.endTime,leaderID:t.leaderID,content:t.content,target:t.target,projectID:a.id}).then(function(t){200!==t.status&&alert(t.data)}).catch(function(t){alert(t)})}),alert("成功创建项目！"),t.$router.push("/project")}else alert(e)}).catch(function(t){alert(t)}):this.$notify.warning({title:"请输入项目名称！"}):this.$notify.warning({title:"请选择项目负责人！"})}},mounted:function(){this.item.managerID=-1,this.task.leaderID=-1,this.getPIList(),this.getPRList(),this.getStudentList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"weui-cell"},[t._m(0),t._v(" "),a("div",{staticClass:"weui-cell__bd "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],staticClass:"weui-input",attrs:{placeholder:"请输入项目名称",type:"name"},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(1),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.startTime,expression:"item.startTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.item.startTime},on:{input:function(e){e.target.composing||t.$set(t.item,"startTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(2),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.endTime,expression:"item.endTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.item.endTime},on:{input:function(e){e.target.composing||t.$set(t.item,"endTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui_cell weui_cell_select"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.item.managerID,expression:"item.managerID"}],staticClass:"weui_select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.item,"managerID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择项目负责人")]),t._v(" "),t._l(t.list,function(t){return a("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})],2)])]),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[t._m(3),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入项目主要内容",clearable:""},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}})],1),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[t._m(4),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入项目考核指标",clearable:""},model:{value:t.item.target,callback:function(e){t.$set(t.item,"target",e)},expression:"item.target"}})],1),t._v(" "),a("div",{staticClass:"weui-cell"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("项目课题安排")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.handleAddTask}},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconicon_add"}})])])],1),t._v(" "),t._l(t.taskAll,function(e){return a("div",{key:e.name,staticClass:"text item"},[t._v("\n        "+t._s(e.name)+"\n      ")])})],2)],1),t._v(" "),a("div",{staticClass:"weui-btn-area"},[a("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){return t.submit()}}},[t._v("提交")])]),t._v(" "),a("el-dialog",{attrs:{title:"新建课题",visible:t.addTask,width:"90%"},on:{"update:visible":function(e){t.addTask=e}}},[a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题名称")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.name,expression:"task.name"}],staticClass:"weui-input",attrs:{placeholder:"请输入课题名称",type:"name"},domProps:{value:t.task.name},on:{input:function(e){e.target.composing||t.$set(t.task,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("开始时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.startTime,expression:"task.startTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.task.startTime},on:{input:function(e){e.target.composing||t.$set(t.task,"startTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("结束时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.endTime,expression:"task.endTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.task.endTime},on:{input:function(e){e.target.composing||t.$set(t.task,"endTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui_cell weui_cell_select"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.task.leaderID,expression:"task.leaderID"}],staticClass:"weui_select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.task,"leaderID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择课题负责人")]),t._v(" "),t._l(t.list,function(t){return a("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})],2)])]),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题主要内容")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题主要内容",clearable:""},model:{value:t.task.content,callback:function(e){t.$set(t.task,"content",e)},expression:"task.content"}})],1),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题考核指标")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题考核指标",clearable:""},model:{value:t.task.target,callback:function(e){t.$set(t.task,"target",e)},expression:"task.target"}})],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addTask=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveTask()}}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("项目名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("开始时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("结束时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("项目主要内容")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("项目考核指标")])])}]};var d=a("VU/8")(u,o,!1,function(t){a("DrfK")},"data-v-09424cb3",null).exports,m={name:"newProject",components:{NPHeader:s,NPForm:d}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("n-p-header"),this._v(" "),e("n-p-form")],1)},staticRenderFns:[]};var _=a("VU/8")(m,v,!1,function(t){a("XCsE")},"data-v-738c5e54",null);e.default=_.exports},"kGw+":function(t,e){}});
//# sourceMappingURL=23.987234aa7ed15d9b8d79.js.map