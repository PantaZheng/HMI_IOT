webpackJsonp([1],{"A/ev":function(e,t){},Fbk1:function(e,t){},OWlb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("lbHh"),n=a.n(i),s={name:"BindHeader",data:function(){return{level:parseInt(n.a.get("level")),assistantLevel:parseInt(this.assistant)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-title v-center"},[e._v("\n    注册\n  ")]),e._v(" "),e.level===e.assistantLevel?a("div",[a("el-dropdown",{staticClass:"header-right"},[a("span",{staticClass:"el-dropdown-link"},[a("svg",{staticClass:"icon ",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icondian2"}})])]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/userManage"}},[a("el-dropdown-item",[e._v("用户管理")])],1),e._v(" "),a("router-link",{attrs:{to:"/addUser"}},[a("el-dropdown-item",[e._v("新增用户")])],1)],1)],1)],1):e._e()])},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("Fbk1")},"data-v-2541c481",null).exports,r=a("mvHQ"),c=a.n(r),u=a("OMN4"),d=a.n(u),m=a("fxnj"),v=a.n(m),p={name:"BindForm",data:function(){return{name:n.a.get("username"),telephone:n.a.get("telephone"),logOff:!1,tag:!1,item:{name:"",telephone:"",code:this.$global.getUrlKey("code")}}},methods:{submit:function(){var e=this;""!==this.item.name&&""!==this.item.telephone?this.$axios({method:"put",url:this.url+"/user/bind",data:c()(this.item)}).then(function(t){if(200===t.status){alert("绑定成功");var a=t.data;n.a.set("username",a.name),n.a.set("level",a.level),n.a.set("id",a.id),n.a.set("telephone",e.item.telephone),localStorage.setItem("level",a.level),localStorage.setItem("id",a.id),localStorage.setItem("name",a.name),localStorage.setItem("telephone",e.item.telephone),e.$router.push("/project")}else v.a.closeWindow(),alert("绑定失败！请重新打开界面尝试")}).catch(function(){v.a.closeWindow(),alert("绑定失败！请重新打开界面尝试")}):this.$notify.warning({title:"请输入姓名和电话!"})},getInfo:function(){d.a.get(this.url+"/user/info/"+n.a.get("id")).then(this.getInfoSucc)},getInfoSucc:function(e){200!==e.status?alert(e):e&&(e=e.data,this.item.name=e.name,this.item.telephone=e.telephone)},off:function(){this.$axios.delete(this.url+"/user/id/"+n.a.get("id")),n.a.remove("username"),n.a.remove("level"),n.a.remove("id"),n.a.remove("telephone"),localStorage.removeItem("level"),localStorage.removeItem("id"),localStorage.removeItem("username"),localStorage.removeItem("telephone"),this.tag=!1,this.logOff=!1,alert("您已成功注销!"),this.item=[],v.a.closeWindow()}},created:function(){n.a.get("id")&&(this.getInfo(),this.tag=!0)}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"weui-cells form weui-cells_form"},[a("div",{staticClass:"weui-cell"},[e._m(0),e._v(" "),a("div",{staticClass:"weui-cell__bd "},[e.tag?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"item.name"}],staticClass:"weui-input",attrs:{required:"",placeholder:"请准确输入您的姓名",type:"name"},domProps:{value:e.item.name},on:{input:function(t){t.target.composing||e.$set(e.item,"name",t.target.value)}}}),e._v(" "),e.tag?a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"weui-input",attrs:{type:"name",disabled:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}):e._e()])]),e._v(" "),a("div",{staticClass:"weui-cell"},[e._m(1),e._v(" "),a("div",{staticClass:"weui-cell__bd"},[e.tag?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.telephone,expression:"item.telephone"}],staticClass:"weui-input",attrs:{placeholder:"请输入您的手机号",type:"tel"},domProps:{value:e.item.telephone},on:{input:function(t){t.target.composing||e.$set(e.item,"telephone",t.target.value)}}}),e._v(" "),e.tag?a("input",{directives:[{name:"model",rawName:"v-model",value:e.telephone,expression:"telephone"}],staticClass:"weui-input",attrs:{type:"tel",disabled:""},domProps:{value:e.telephone},on:{input:function(t){t.target.composing||(e.telephone=t.target.value)}}}):e._e()])])]),e._v(" "),e.tag?e._e():a("div",{staticClass:"weui-btn-area",on:{click:function(t){return e.submit()}}},[a("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:;"}},[e._v("确定")])]),e._v(" "),e.tag?a("div",{staticClass:"weui-btn-area",on:{click:function(t){e.logOff=!0}}},[a("a",{staticClass:"weui-btn weui-btn_default",attrs:{href:"javascript:;"}},[e._v("注销")])]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.logOff,width:"70%"},on:{"update:visible":function(t){e.logOff=t}}},[a("span",[e._v("注销后将不具备任何权限，确定注销账号吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.logOff=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.off}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("姓名")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label"},[this._v("手机号")])])}]};var f=a("VU/8")(p,h,!1,function(e){a("Sq4+")},"data-v-666ced70",null).exports,_={name:"index",components:{BindHeader:o,BindForm:f}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("bind-header"),this._v(" "),t("bind-form")],1)},staticRenderFns:[]};var w=a("VU/8")(_,g,!1,function(e){a("A/ev")},"data-v-27642e1d",null);t.default=w.exports},"Sq4+":function(e,t){}});
//# sourceMappingURL=1.873c9735c99db8e914e7.js.map