webpackJsonp([2],{"6vSb":function(t,e){},Aay7:function(t,e){},O82e:function(t,e){},SuCd:function(t,e){},VFXq:function(t,e){},gxoR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("lbHh"),s=i.n(n),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-title v-center"},[this._v("\n    项目管理\n  ")]),this._v(" "),e("el-dropdown",{staticClass:"header-right"},[e("span",{staticClass:"el-dropdown-link"},[e("svg",{staticClass:"icon ",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icondian2"}})])]),this._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("router-link",{attrs:{to:"/newProject"}},[e("el-dropdown-item",[this._v("新增项目")])],1)],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")({name:"pmHeader"},a,!1,function(t){i("O82e")},"data-v-10955486",null).exports,o=i("OMN4"),c=i.n(o),l={name:"pmList",data:function(){return{deleteProject:!1,list:[],pname:"",pid:Number}},methods:{goProjectDetail:function(t,e){sessionStorage.setItem("pid",t),sessionStorage.setItem("pname",e),this.$router.push("/projectDetail")},getProjectList:function(){c.a.get(this.url+"/project/all").then(this.getProjectListSucc)},getProjectListSucc:function(t){if(200===t.status){var e=t.data;this.list=e}},handleEdit:function(t,e){sessionStorage.setItem("pid",t),sessionStorage.setItem("pname",e),this.$router.push("/projectEdit")},handleDelete:function(t,e){this.deleteProject=!0,this.pname=e,this.pid=t},delProject:function(){var t=this;this.$axios({method:"delete",url:this.url+"/project/id/"+this.pid}).then(function(e){200===e.status&&(alert("删除成功！"),c.a.get(t.url+"/project/all").then(t.getProjectListSucc),t.deleteProject=!1)}).catch(function(t){alert(t)})}},mounted:function(){this.getProjectList()}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.list,function(e){return i("el-container",{key:e.id,staticStyle:{height:"auto",width:"100%",border:"1px solid #eee",display:"flex"}},[i("el-main",{staticStyle:{width:"50px",display:"flex",height:"100%"}},[i("span",[i("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-"}})])])]),t._v(" "),i("el-main",{staticStyle:{width:"60%",display:"flex",height:"100%"},nativeOn:{click:function(i){return t.goProjectDetail(e.id,e.name)}}},[i("span",[t._v("\n          "+t._s(e.name)+"\n        ")])]),t._v(" "),i("el-main",{staticStyle:{width:"30%",display:"flex",height:"100%"}},[i("span",{on:{click:function(i){return t.handleEdit(e.id,e.name)}}},[i("svg",{staticClass:"icon delIconSize",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconbianji3"}})])]),t._v(" "),i("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),t._v(" "),i("span",{staticStyle:{"text-align":"center"},on:{click:function(i){return t.handleDelete(e.id,e.name)}}},[i("svg",{staticClass:"icon delIconSize",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconpicture-delet"}})])])],1)],1)}),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.deleteProject,width:"70%"},on:{"update:visible":function(e){t.deleteProject=e}}},[i("span",[t._v("确定删除《"+t._s(t.pname)+"》吗？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.deleteProject=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.delProject}},[t._v("确 定")])],1)])],2)},staticRenderFns:[]};var u=i("VU/8")(l,d,!1,function(t){i("vjPD")},"data-v-7110bdfa",null).exports,h={name:"projectManage",components:{PMHeader:r,PMList:u}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p-m-header"),this._v(" "),e("p-m-list")],1)},staticRenderFns:[]};var f=i("VU/8")(h,p,!1,function(t){i("Aay7")},"data-v-27a15146",null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"v-center header page-bg page-hd-title"},[this._v("\n  项目列表\n")])},staticRenderFns:[]};var g=i("VU/8")({name:"projectListHeader"},v,!1,function(t){i("r84o")},"data-v-377138e2",null).exports,m=i("ifoU"),j=i.n(m),_={name:"projectListList",data:function(){return{list:[],tag:this.Run}},methods:{goProjectDetail:function(t,e){sessionStorage.setItem("pid",t),sessionStorage.setItem("pname",e),this.$router.push("/projectDetail")},getProjectAll:function(){c.a.get(this.url+"/project/all").then(this.getProjectListSucc)},getProjectManager:function(){c.a.get(this.url+"/project/manager/"+localStorage.getItem("id")).then(this.getProjectListSucc)},getProjectMember:function(){c.a.get(this.url+"/project/member/"+localStorage.getItem("id")).then(this.getProjectListSucc)},getProjectListSucc:function(t){if(200===t.status){t=t.data;var e=this.list.concat(t),i=new j.a;this.list=e.filter(function(t){return!i.has(t.id)&&i.set(t.id,1)})}}},mounted:function(){var t=parseInt(localStorage.getItem("level"));t===this.PI?this.getProjectManager():t===this.PR?(this.getProjectMember(),this.getProjectManager()):t===this.student?this.getProjectMember():this.getProjectAll()}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.list,function(e){return e.state===t.tag?i("el-container",{key:e.id,staticStyle:{height:"auto",width:"100%",border:"1px solid #eee",display:"flex"},nativeOn:{click:function(i){return t.goProjectDetail(e.id,e.name)}}},[i("el-main",{staticStyle:{width:"50px",display:"flex",height:"100%"}},[i("span",[i("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-"}})])])]),t._v(" "),i("el-main",{staticStyle:{width:"60%",display:"flex",height:"100%"}},[i("span",[t._v("\n          "+t._s(e.name)+"\n        ")])]),t._v(" "),i("el-main",{staticStyle:{width:"30%",display:"flex",height:"100%"}},[i("span",[i("svg",{staticClass:"icon fuzerenIcon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#iconren"}})]),t._v("\n          "+t._s(e.managerName)+"\n        ")])])],1):t._e()}),1)},staticRenderFns:[]};var S=i("VU/8")(_,P,!1,function(t){i("6vSb")},"data-v-1918f9c5",null).exports,x={name:"projectList",components:{PLHeader:g,PLList:S}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p-l-header"),this._v(" "),e("p-l-list")],1)},staticRenderFns:[]};var b=i("VU/8")(x,y,!1,function(t){i("VFXq")},"data-v-193b03c6",null).exports,L={name:"index",data:function(){return{level:parseInt(s.a.get("level")),assistant:parseInt(this.assistant)}},components:{ProjectManage:f,ProjectList:b},methods:{judge:function(){s.a.get("id")||this.$router.push("/loginError")}},created:function(){this.judge()}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.level===this.assistant?e("project-manage"):e("project-list")],1)},staticRenderFns:[]};var I=i("VU/8")(L,w,!1,function(t){i("SuCd")},"data-v-c04c7320",null);e.default=I.exports},r84o:function(t,e){},vjPD:function(t,e){}});
//# sourceMappingURL=2.fd4fc8831f84fcaed6c9.js.map