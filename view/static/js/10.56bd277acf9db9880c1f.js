webpackJsonp([10],{YjbS:function(t,e){},qnhY:function(t,e){},w7h3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"ProjectEditHeader",data:function(){return{pName:sessionStorage.getItem("pname")}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-left v-center"},[e("router-link",{attrs:{to:"/project"}},[e("svg",{staticClass:"icon arrow",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#iconicon-copy-copy"}})])]),this._v(" "),e("el-divider",{attrs:{direction:"vertical"}})],1),this._v(" "),e("div",{staticClass:"header-title v-center"},[this._v("\n    "+this._s(this.pName)+"\n  ")])])},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("qnhY")},"data-v-62eeff21",null).exports,n=a("OMN4"),r=a.n(n),c={name:"projectEditForm",data:function(){return{options:[{value:1,label:"课题等待审核"},{value:2,label:"项目等待审核"},{value:3,label:"运行中"},{value:4,label:"已完成"}],project:"",edit:!1,addTask:!1,deleteTask:!1,editTask:!1,taskID:"",taskName:"",name:"",startTime:"",endTime:"",content:"",target:"",managerName:"",teacherList:[],editTaskForm:{name:"",projectID:parseInt(sessionStorage.getItem("pid")),startTime:"",endTime:"",leaderID:"",content:"",target:"",state:""},task:{name:"",projectID:parseInt(sessionStorage.getItem("pid")),startTime:"",endTime:"",leaderID:"",content:"",target:""},taskList:[]}},methods:{getPRList:function(){r.a.get(this.url+"/user/level/"+this.PR).then(this.getTeacherListSucc)},getTeacherListSucc:function(t){200===t.status?(t=t.data,this.teacherList=t):alert("获取老师列表失败，请稍后再试！")},delTask:function(){var t=this;this.$axios({method:"delete",url:this.url+"/module/id/"+this.taskID}).then(function(e){200===e.status&&(alert("删除成功！"),r.a.get(t.url+"/module/project"+sessionStorage.getItem("pid")).then(t.getTaskListSucc),t.deleteTask=!1,t.getTaskList())}).catch(function(t){alert(t)})},handleEdit:function(t){this.editTask=!0,this.getPRList(),r.a.get(this.url+"/module/id/"+t).then(this.getTaskSucc)},getTaskSucc:function(t){200===t.status?(t=t.data,this.editTaskForm=t,this.editTaskForm.state=t.state,this.editTask=!0):alert(t.data)},handleDelete:function(t,e){this.deleteTask=!0,this.taskName=e,this.taskID=t},handleAddTask:function(){this.getPRList(),this.task.name="",this.task.startTime="",this.task.endTime="",this.task.content="",this.task.target="",this.task.leaderID=-1,this.addTask=!0},getProject:function(){r.a.get(this.url+"/project/id/"+sessionStorage.getItem("pid")).then(this.getProjectSucc)},getProjectSucc:function(t){(t=t.data)&&(this.project=t,this.name=t.name,this.startTime=t.startTime,this.endTime=t.endTime,this.content=t.content,this.target=t.target,this.managerName=t.managerName)},getTaskList:function(){r.a.get(this.url+"/module/project/"+sessionStorage.getItem("pid")).then(this.getTaskListSucc)},getTaskListSucc:function(t){200===t.status?(t=t.data,this.taskList=t):alert(t.date)},updateTask:function(){-1!==this.editTaskForm.leaderID?""!==this.editTaskForm.name?(this.$axios({method:"put",url:this.url+"/module/",data:this.editTaskForm}).then(function(t){200===t.status?alert("提交成功！"):alert(t.data)}).catch(function(t){alert(t)}),this.editTask=!1):this.$notify.warning({title:"请输入课题名称！"}):this.$notify.warning({title:"请选择课题负责人！"})},submitTask:function(){var t=this;-1!==this.task.leaderID?""!==this.task.name?(this.$axios({method:"post",url:this.url+"/module/",data:this.task}).then(function(e){200===e.status?(e=e.data,alert("提交成功！"),t.taskList.push({name:t.task.name,id:e.id})):alert(e.data)}).catch(function(t){alert(t)}),this.addTask=!1):this.$notify.warning({title:"请输入课题名称！"}):this.$notify.warning({title:"请选择课题负责人！"})},submit:function(){var t=this;this.$axios({method:"put",url:this.url+"/project/",data:{id:parseInt(sessionStorage.getItem("pid")),managerID:this.project.managerID,name:this.name,startTime:this.startTime,endTime:this.endTime,content:this.content,target:this.target}}).then(function(e){200===e.status?alert("提交成功！"):alert(e.data),t.$router.push("/project")}).catch(function(t){alert(t)}),this.edit=!1}},mounted:function(){this.getProject(),this.getTaskList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-bg"},[a("el-divider"),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(0),t._v(" "),a("div",{staticClass:"weui-cell__bd cellMargin"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.name)+"\n      ")])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(1),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.startTime,expression:"startTime"}],staticClass:"weui_input",attrs:{type:"date"},domProps:{value:t.startTime},on:{input:function(e){e.target.composing||(t.startTime=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(2),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],staticClass:"weui_input",attrs:{type:"date"},domProps:{value:t.endTime},on:{input:function(e){e.target.composing||(t.endTime=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[t._m(3),t._v(" "),a("div",{staticClass:"weui-cell__bd cellMargin"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[t._v("\n        "+t._s(t.managerName)+"\n      ")])])]),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[t._m(4),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入项目主要内容",clearable:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[t._m(5),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入项目考核指标",clearable:""},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"row"},[a("svg",{staticClass:"icon addTaskIcon",attrs:{"aria-hidden":"true"},on:{click:t.handleAddTask}},[a("use",{attrs:{"xlink:href":"#iconicon_add"}})]),t._v(" "),a("span",{staticClass:"v-center"},[a("svg",{staticClass:"icon taskIcon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconmokuai1"}})]),t._v("\n        课题安排\n      ")])]),t._v(" "),a("el-divider"),t._v(" "),t._l(t.taskList,function(e){return a("div",{key:e.id},[a("div",{staticClass:"row"},[a("span",{staticClass:"taskName"},[a("svg",{staticClass:"icon projectIcon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icondian3"}})]),t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),a("span",{staticClass:"delIcon",on:{click:function(a){return t.handleDelete(e.id,e.name)}}},[a("svg",{staticClass:"icon delIconSize",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconpicture-delet"}})])]),t._v(" "),a("span",{staticClass:"delIcon",on:{click:function(a){return t.handleEdit(e.id)}}},[a("svg",{staticClass:"icon delIconSize",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconbianji1"}})])])]),t._v(" "),a("el-divider")],1)}),t._v(" "),a("div",{staticClass:"weui-btn-area"},[a("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.edit=!0}}},[t._v("提交修改")])]),t._v(" "),a("el-dialog",{attrs:{title:"修改课题",visible:t.editTask,width:"90%"},on:{"update:visible":function(e){t.editTask=e}}},[a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题名称")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editTaskForm.name,expression:"editTaskForm.name"}],staticClass:"weui-input",attrs:{pattern:"[0-9]*",placeholder:"请输入课题名称",type:"name"},domProps:{value:t.editTaskForm.name},on:{input:function(e){e.target.composing||t.$set(t.editTaskForm,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("开始时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editTaskForm.startTime,expression:"editTaskForm.startTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.editTaskForm.startTime},on:{input:function(e){e.target.composing||t.$set(t.editTaskForm,"startTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("结束时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editTaskForm.endTime,expression:"editTaskForm.endTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.editTaskForm.endTime},on:{input:function(e){e.target.composing||t.$set(t.editTaskForm,"endTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui_cell weui_cell_select"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.editTaskForm.leaderID,expression:"editTaskForm.leaderID"}],staticClass:"weui_select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editTaskForm,"leaderID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择课题负责人")]),t._v(" "),t._l(t.teacherList,function(t){return a("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})],2)])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题状态")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd "},[a("el-select",{attrs:{placeholder:"请选择课题当前状态"},model:{value:t.editTaskForm.state,callback:function(e){t.$set(t.editTaskForm,"state",e)},expression:"editTaskForm.state"}},t._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.value))])])}),1)],1)]),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题主要内容")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题主要内容",clearable:""},model:{value:t.editTaskForm.content,callback:function(e){t.$set(t.editTaskForm,"content",e)},expression:"editTaskForm.content"}})],1),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题考核指标")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题考核指标",clearable:""},model:{value:t.editTaskForm.target,callback:function(e){t.$set(t.editTaskForm,"target",e)},expression:"editTaskForm.target"}})],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editTask=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateTask()}}},[t._v("提交修改")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新建课题",visible:t.addTask,width:"90%"},on:{"update:visible":function(e){t.addTask=e}}},[a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题名称")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.name,expression:"task.name"}],staticClass:"weui-input",attrs:{pattern:"[0-9]*",placeholder:"请输入课题名称",type:"name"},domProps:{value:t.task.name},on:{input:function(e){e.target.composing||t.$set(t.task,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("开始时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.startTime,expression:"task.startTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.task.startTime},on:{input:function(e){e.target.composing||t.$set(t.task,"startTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("结束时间")])]),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.endTime,expression:"task.endTime"}],staticClass:"weui_input",attrs:{type:"date",value:""},domProps:{value:t.task.endTime},on:{input:function(e){e.target.composing||t.$set(t.task,"endTime",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"weui_cell weui_cell_select"},[a("div",{staticClass:"weui_cell_bd weui_cell_primary"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.task.leaderID,expression:"task.leaderID"}],staticClass:"weui_select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.task,"leaderID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择课题负责人")]),t._v(" "),t._l(t.teacherList,function(t){return a("option",{key:t.id,attrs:{label:t.name},domProps:{value:t.id}})})],2)])]),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题主要内容")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题主要内容",clearable:""},model:{value:t.task.content,callback:function(e){t.$set(t.task,"content",e)},expression:"task.content"}})],1),t._v(" "),a("div",{staticClass:"weui-cell weui-cells_form"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("课题考核指标")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入课题考核指标",clearable:""},model:{value:t.task.target,callback:function(e){t.$set(t.task,"target",e)},expression:"task.target"}})],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addTask=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitTask()}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.edit,width:"70%"},on:{"update:visible":function(e){t.edit=e}}},[a("span",[t._v("确定提交《"+t._s(t.name)+"》的修改吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.edit=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteTask,width:"70%"},on:{"update:visible":function(e){t.deleteTask=e}}},[a("span",[t._v("确定删除《"+t._s(t.taskName)+"》吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteTask=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delTask}},[t._v("确 定")])],1)])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("项目名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("开始时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("结束时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("项目负责人")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("主要内容")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label"},[this._v("考核指标")])])}]};var d=a("VU/8")(c,o,!1,function(t){a("YjbS")},"data-v-4f006cda",null).exports,u={name:"projectEdit",components:{ProjectEditHeader:l,ProjectEditForm:d}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("project-edit-header"),this._v(" "),e("project-edit-form")],1)},staticRenderFns:[]};var _=a("VU/8")(u,v,!1,function(t){a("yazu")},"data-v-4b32a632",null);e.default=_.exports},yazu:function(t,e){}});
//# sourceMappingURL=10.56bd277acf9db9880c1f.js.map